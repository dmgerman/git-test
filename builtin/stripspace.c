macro_line|#include &quot;builtin.h&quot;
macro_line|#include &quot;cache.h&quot;
macro_line|#include &quot;parse-options.h&quot;
macro_line|#include &quot;strbuf.h&quot;
DECL|function|comment_lines
r_static
r_void
id|comment_lines
c_func
(paren
r_struct
id|strbuf
op_star
id|buf
)paren
(brace
r_char
op_star
id|msg
suffix:semicolon
r_int
id|len
suffix:semicolon
id|msg
op_assign
id|strbuf_detach
c_func
(paren
id|buf
comma
op_amp
id|len
)paren
suffix:semicolon
id|strbuf_add_commented_lines
c_func
(paren
id|buf
comma
id|msg
comma
id|len
)paren
suffix:semicolon
id|free
c_func
(paren
id|msg
)paren
suffix:semicolon
)brace
DECL|variable|stripspace_usage
r_static
r_const
r_char
op_star
r_const
id|stripspace_usage
(braket
)braket
op_assign
(brace
id|N_
c_func
(paren
l_string|&quot;git stripspace [-s | --strip-comments]&quot;
)paren
comma
id|N_
c_func
(paren
l_string|&quot;git stripspace [-c | --comment-lines]&quot;
)paren
comma
l_int|NULL
)brace
suffix:semicolon
DECL|enum|stripspace_mode
r_enum
id|stripspace_mode
(brace
DECL|enumerator|STRIP_DEFAULT
id|STRIP_DEFAULT
op_assign
l_int|0
comma
DECL|enumerator|STRIP_COMMENTS
id|STRIP_COMMENTS
comma
DECL|enumerator|COMMENT_LINES
id|COMMENT_LINES
)brace
suffix:semicolon
DECL|function|cmd_stripspace
r_int
id|cmd_stripspace
c_func
(paren
r_int
id|argc
comma
r_const
r_char
op_star
op_star
id|argv
comma
r_const
r_char
op_star
id|prefix
)paren
(brace
r_struct
id|strbuf
id|buf
op_assign
id|STRBUF_INIT
suffix:semicolon
r_enum
id|stripspace_mode
id|mode
op_assign
id|STRIP_DEFAULT
suffix:semicolon
r_const
r_struct
id|option
id|options
(braket
)braket
op_assign
(brace
id|OPT_CMDMODE
c_func
(paren
l_char|&squot;s&squot;
comma
l_string|&quot;strip-comments&quot;
comma
op_amp
id|mode
comma
id|N_
c_func
(paren
l_string|&quot;skip and remove all lines starting with comment character&quot;
)paren
comma
id|STRIP_COMMENTS
)paren
comma
id|OPT_CMDMODE
c_func
(paren
l_char|&squot;c&squot;
comma
l_string|&quot;comment-lines&quot;
comma
op_amp
id|mode
comma
id|N_
c_func
(paren
l_string|&quot;prepend comment character and blank to each line&quot;
)paren
comma
id|COMMENT_LINES
)paren
comma
id|OPT_END
c_func
(paren
)paren
)brace
suffix:semicolon
id|argc
op_assign
id|parse_options
c_func
(paren
id|argc
comma
id|argv
comma
id|prefix
comma
id|options
comma
id|stripspace_usage
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|argc
)paren
id|usage_with_options
c_func
(paren
id|stripspace_usage
comma
id|options
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mode
op_eq
id|STRIP_COMMENTS
op_logical_or
id|mode
op_eq
id|COMMENT_LINES
)paren
id|git_config
c_func
(paren
id|git_default_config
comma
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|strbuf_read
c_func
(paren
op_amp
id|buf
comma
l_int|0
comma
l_int|1024
)paren
OL
l_int|0
)paren
id|die_errno
c_func
(paren
l_string|&quot;could not read the input&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mode
op_eq
id|STRIP_DEFAULT
op_logical_or
id|mode
op_eq
id|STRIP_COMMENTS
)paren
id|strbuf_stripspace
c_func
(paren
op_amp
id|buf
comma
id|mode
op_eq
id|STRIP_COMMENTS
)paren
suffix:semicolon
r_else
id|comment_lines
c_func
(paren
op_amp
id|buf
)paren
suffix:semicolon
id|write_or_die
c_func
(paren
l_int|1
comma
id|buf.buf
comma
id|buf.len
)paren
suffix:semicolon
id|strbuf_release
c_func
(paren
op_amp
id|buf
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
eof
