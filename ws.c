multiline_comment|/*&n; * Whitespace rules&n; *&n; * Copyright (c) 2007 Junio C Hamano&n; */
macro_line|#include &quot;cache.h&quot;
macro_line|#include &quot;attr.h&quot;
DECL|struct|whitespace_rule
r_static
r_struct
id|whitespace_rule
(brace
DECL|member|rule_name
r_const
r_char
op_star
id|rule_name
suffix:semicolon
DECL|member|rule_bits
r_int
id|rule_bits
suffix:semicolon
DECL|variable|whitespace_rule_names
)brace
id|whitespace_rule_names
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;trailing-space&quot;
comma
id|WS_TRAILING_SPACE
)brace
comma
(brace
l_string|&quot;space-before-tab&quot;
comma
id|WS_SPACE_BEFORE_TAB
)brace
comma
(brace
l_string|&quot;indent-with-non-tab&quot;
comma
id|WS_INDENT_WITH_NON_TAB
)brace
comma
)brace
suffix:semicolon
DECL|function|parse_whitespace_rule
r_int
id|parse_whitespace_rule
c_func
(paren
r_const
r_char
op_star
id|string
)paren
(brace
r_int
id|rule
op_assign
id|WS_DEFAULT_RULE
suffix:semicolon
r_while
c_loop
(paren
id|string
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
id|len
suffix:semicolon
r_const
r_char
op_star
id|ep
suffix:semicolon
r_int
id|negated
op_assign
l_int|0
suffix:semicolon
id|string
op_assign
id|string
op_plus
id|strspn
c_func
(paren
id|string
comma
l_string|&quot;, &bslash;t&bslash;n&bslash;r&quot;
)paren
suffix:semicolon
id|ep
op_assign
id|strchr
c_func
(paren
id|string
comma
l_char|&squot;,&squot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ep
)paren
id|len
op_assign
id|strlen
c_func
(paren
id|string
)paren
suffix:semicolon
r_else
id|len
op_assign
id|ep
id|string
suffix:semicolon
r_if
c_cond
(paren
op_star
id|string
op_eq
l_char|&squot;-&squot;
)paren
(brace
id|negated
op_assign
l_int|1
suffix:semicolon
id|string
op_increment
suffix:semicolon
id|len
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|len
)paren
r_break
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ARRAY_SIZE
c_func
(paren
id|whitespace_rule_names
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|strncmp
c_func
(paren
id|whitespace_rule_names
(braket
id|i
)braket
dot
id|rule_name
comma
id|string
comma
id|len
)paren
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
id|negated
)paren
id|rule
op_and_assign
op_complement
id|whitespace_rule_names
(braket
id|i
)braket
dot
id|rule_bits
suffix:semicolon
r_else
id|rule
op_or_assign
id|whitespace_rule_names
(braket
id|i
)braket
dot
id|rule_bits
suffix:semicolon
r_break
suffix:semicolon
)brace
id|string
op_assign
id|ep
suffix:semicolon
)brace
r_return
id|rule
suffix:semicolon
)brace
DECL|function|setup_whitespace_attr_check
r_static
r_void
id|setup_whitespace_attr_check
c_func
(paren
r_struct
id|git_attr_check
op_star
id|check
)paren
(brace
r_static
r_struct
id|git_attr
op_star
id|attr_whitespace
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|attr_whitespace
)paren
id|attr_whitespace
op_assign
id|git_attr
c_func
(paren
l_string|&quot;whitespace&quot;
comma
l_int|10
)paren
suffix:semicolon
id|check
(braket
l_int|0
)braket
dot
id|attr
op_assign
id|attr_whitespace
suffix:semicolon
)brace
DECL|function|whitespace_rule
r_int
id|whitespace_rule
c_func
(paren
r_const
r_char
op_star
id|pathname
)paren
(brace
r_struct
id|git_attr_check
id|attr_whitespace_rule
suffix:semicolon
id|setup_whitespace_attr_check
c_func
(paren
op_amp
id|attr_whitespace_rule
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|git_checkattr
c_func
(paren
id|pathname
comma
l_int|1
comma
op_amp
id|attr_whitespace_rule
)paren
)paren
(brace
r_const
r_char
op_star
id|value
suffix:semicolon
id|value
op_assign
id|attr_whitespace_rule.value
suffix:semicolon
r_if
c_cond
(paren
id|ATTR_TRUE
c_func
(paren
id|value
)paren
)paren
(brace
multiline_comment|/* true (whitespace) */
r_int
id|all_rule
op_assign
l_int|0
suffix:semicolon
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ARRAY_SIZE
c_func
(paren
id|whitespace_rule_names
)paren
suffix:semicolon
id|i
op_increment
)paren
id|all_rule
op_or_assign
id|whitespace_rule_names
(braket
id|i
)braket
dot
id|rule_bits
suffix:semicolon
r_return
id|all_rule
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ATTR_FALSE
c_func
(paren
id|value
)paren
)paren
(brace
multiline_comment|/* false (-whitespace) */
r_return
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|ATTR_UNSET
c_func
(paren
id|value
)paren
)paren
(brace
multiline_comment|/* reset to default (!whitespace) */
r_return
id|whitespace_rule_cfg
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* string */
r_return
id|parse_whitespace_rule
c_func
(paren
id|value
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_return
id|whitespace_rule_cfg
suffix:semicolon
)brace
)brace
eof
