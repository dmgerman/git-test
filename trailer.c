macro_line|#include &quot;cache.h&quot;
multiline_comment|/*&n; * Copyright (c) 2013, 2014 Christian Couder &lt;chriscool@tuxfamily.org&gt;&n; */
DECL|enum|action_where
DECL|enumerator|WHERE_END
DECL|enumerator|WHERE_AFTER
DECL|enumerator|WHERE_BEFORE
DECL|enumerator|WHERE_START
r_enum
id|action_where
(brace
id|WHERE_END
comma
id|WHERE_AFTER
comma
id|WHERE_BEFORE
comma
id|WHERE_START
)brace
suffix:semicolon
DECL|enum|action_if_exists
DECL|enumerator|EXISTS_ADD_IF_DIFFERENT_NEIGHBOR
DECL|enumerator|EXISTS_ADD_IF_DIFFERENT
r_enum
id|action_if_exists
(brace
id|EXISTS_ADD_IF_DIFFERENT_NEIGHBOR
comma
id|EXISTS_ADD_IF_DIFFERENT
comma
DECL|enumerator|EXISTS_ADD
DECL|enumerator|EXISTS_REPLACE
DECL|enumerator|EXISTS_DO_NOTHING
id|EXISTS_ADD
comma
id|EXISTS_REPLACE
comma
id|EXISTS_DO_NOTHING
)brace
suffix:semicolon
DECL|enum|action_if_missing
DECL|enumerator|MISSING_ADD
DECL|enumerator|MISSING_DO_NOTHING
r_enum
id|action_if_missing
(brace
id|MISSING_ADD
comma
id|MISSING_DO_NOTHING
)brace
suffix:semicolon
DECL|struct|conf_info
r_struct
id|conf_info
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|key
r_char
op_star
id|key
suffix:semicolon
DECL|member|command
r_char
op_star
id|command
suffix:semicolon
DECL|member|where
r_enum
id|action_where
id|where
suffix:semicolon
DECL|member|if_exists
r_enum
id|action_if_exists
id|if_exists
suffix:semicolon
DECL|member|if_missing
r_enum
id|action_if_missing
id|if_missing
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|default_conf_info
r_static
r_struct
id|conf_info
id|default_conf_info
suffix:semicolon
DECL|struct|trailer_item
r_struct
id|trailer_item
(brace
DECL|member|previous
r_struct
id|trailer_item
op_star
id|previous
suffix:semicolon
DECL|member|next
r_struct
id|trailer_item
op_star
id|next
suffix:semicolon
DECL|member|token
r_const
r_char
op_star
id|token
suffix:semicolon
DECL|member|value
r_const
r_char
op_star
id|value
suffix:semicolon
DECL|member|conf
r_struct
id|conf_info
id|conf
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|first_conf_item
r_static
r_struct
id|trailer_item
op_star
id|first_conf_item
suffix:semicolon
DECL|variable|separators
r_static
r_char
op_star
id|separators
op_assign
l_string|&quot;:&quot;
suffix:semicolon
DECL|function|after_or_end
r_static
r_int
id|after_or_end
c_func
(paren
r_enum
id|action_where
id|where
)paren
(brace
r_return
(paren
id|where
op_eq
id|WHERE_AFTER
)paren
op_logical_or
(paren
id|where
op_eq
id|WHERE_END
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Return the length of the string not including any final&n; * punctuation. E.g., the input &quot;Signed-off-by:&quot; would return&n; * 13, stripping the trailing punctuation but retaining&n; * internal punctuation.&n; */
DECL|function|token_len_without_separator
r_static
r_int
id|token_len_without_separator
c_func
(paren
r_const
r_char
op_star
id|token
comma
r_int
id|len
)paren
(brace
r_while
c_loop
(paren
id|len
OG
l_int|0
op_logical_and
op_logical_neg
id|isalnum
c_func
(paren
id|token
(braket
id|len
l_int|1
)braket
)paren
)paren
id|len
op_decrement
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|same_token
r_static
r_int
id|same_token
c_func
(paren
r_struct
id|trailer_item
op_star
id|a
comma
r_struct
id|trailer_item
op_star
id|b
)paren
(brace
r_int
id|a_len
op_assign
id|token_len_without_separator
c_func
(paren
id|a-&gt;token
comma
id|strlen
c_func
(paren
id|a-&gt;token
)paren
)paren
suffix:semicolon
r_int
id|b_len
op_assign
id|token_len_without_separator
c_func
(paren
id|b-&gt;token
comma
id|strlen
c_func
(paren
id|b-&gt;token
)paren
)paren
suffix:semicolon
r_int
id|min_len
op_assign
(paren
id|a_len
OG
id|b_len
)paren
ques
c_cond
id|b_len
suffix:colon
id|a_len
suffix:semicolon
r_return
op_logical_neg
id|strncasecmp
c_func
(paren
id|a-&gt;token
comma
id|b-&gt;token
comma
id|min_len
)paren
suffix:semicolon
)brace
DECL|function|same_value
r_static
r_int
id|same_value
c_func
(paren
r_struct
id|trailer_item
op_star
id|a
comma
r_struct
id|trailer_item
op_star
id|b
)paren
(brace
r_return
op_logical_neg
id|strcasecmp
c_func
(paren
id|a-&gt;value
comma
id|b-&gt;value
)paren
suffix:semicolon
)brace
DECL|function|same_trailer
r_static
r_int
id|same_trailer
c_func
(paren
r_struct
id|trailer_item
op_star
id|a
comma
r_struct
id|trailer_item
op_star
id|b
)paren
(brace
r_return
id|same_token
c_func
(paren
id|a
comma
id|b
)paren
op_logical_and
id|same_value
c_func
(paren
id|a
comma
id|b
)paren
suffix:semicolon
)brace
eof
