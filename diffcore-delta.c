macro_line|#include &quot;cache.h&quot;
macro_line|#include &quot;diff.h&quot;
macro_line|#include &quot;diffcore.h&quot;
macro_line|#include &quot;delta.h&quot;
macro_line|#include &quot;count-delta.h&quot;
DECL|function|diffcore_count_changes_1
r_static
r_int
id|diffcore_count_changes_1
c_func
(paren
r_void
op_star
id|src
comma
r_int
r_int
id|src_size
comma
r_void
op_star
id|dst
comma
r_int
r_int
id|dst_size
comma
r_int
r_int
id|delta_limit
comma
r_int
r_int
op_star
id|src_copied
comma
r_int
r_int
op_star
id|literal_added
)paren
(brace
r_void
op_star
id|delta
suffix:semicolon
r_int
r_int
id|delta_size
suffix:semicolon
id|delta
op_assign
id|diff_delta
c_func
(paren
id|src
comma
id|src_size
comma
id|dst
comma
id|dst_size
comma
op_amp
id|delta_size
comma
id|delta_limit
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|delta
)paren
multiline_comment|/* If delta_limit is exceeded, we have too much differences */
r_return
l_int|1
suffix:semicolon
multiline_comment|/* Estimate the edit size by interpreting delta. */
r_if
c_cond
(paren
id|count_delta
c_func
(paren
id|delta
comma
id|delta_size
comma
id|src_copied
comma
id|literal_added
)paren
)paren
(brace
id|free
c_func
(paren
id|delta
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
id|free
c_func
(paren
id|delta
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|diffcore_count_changes
r_int
id|diffcore_count_changes
c_func
(paren
r_void
op_star
id|src
comma
r_int
r_int
id|src_size
comma
r_void
op_star
id|dst
comma
r_int
r_int
id|dst_size
comma
r_int
r_int
id|delta_limit
comma
r_int
r_int
op_star
id|src_copied
comma
r_int
r_int
op_star
id|literal_added
)paren
(brace
r_return
id|diffcore_count_changes_1
c_func
(paren
id|src
comma
id|src_size
comma
id|dst
comma
id|dst_size
comma
id|delta_limit
comma
id|src_copied
comma
id|literal_added
)paren
suffix:semicolon
)brace
eof
