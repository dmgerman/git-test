multiline_comment|/*&n; * rev-parse.c&n; *&n; * Copyright (C) Linus Torvalds, 2005&n; */
macro_line|#include &quot;cache.h&quot;
DECL|function|main
r_int
id|main
c_func
(paren
r_int
id|argc
comma
r_char
op_star
op_star
id|argv
)paren
(brace
r_int
id|i
comma
id|as_is
op_assign
l_int|0
comma
id|revs_only
op_assign
l_int|0
comma
id|no_revs
op_assign
l_int|0
suffix:semicolon
r_char
op_star
id|def
op_assign
l_int|NULL
suffix:semicolon
r_int
r_char
id|sha1
(braket
l_int|20
)braket
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|1
suffix:semicolon
id|i
OL
id|argc
suffix:semicolon
id|i
op_increment
)paren
(brace
r_char
op_star
id|arg
op_assign
id|argv
(braket
id|i
)braket
suffix:semicolon
r_char
op_star
id|dotdot
suffix:semicolon
r_if
c_cond
(paren
id|as_is
)paren
(brace
id|printf
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|arg
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_star
id|arg
op_eq
l_char|&squot;-&squot;
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|arg
comma
l_string|&quot;--&quot;
)paren
)paren
(brace
r_if
c_cond
(paren
id|def
)paren
(brace
id|printf
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|def
)paren
suffix:semicolon
id|def
op_assign
l_int|NULL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|revs_only
)paren
r_break
suffix:semicolon
id|as_is
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|arg
comma
l_string|&quot;--default&quot;
)paren
)paren
(brace
r_if
c_cond
(paren
id|def
)paren
id|printf
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|def
)paren
suffix:semicolon
id|def
op_assign
id|argv
(braket
id|i
op_plus
l_int|1
)braket
suffix:semicolon
id|i
op_increment
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|arg
comma
l_string|&quot;--revs-only&quot;
)paren
)paren
(brace
id|revs_only
op_assign
l_int|1
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|arg
comma
l_string|&quot;--no-revs&quot;
)paren
)paren
(brace
id|no_revs
op_assign
l_int|1
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|revs_only
)paren
r_continue
suffix:semicolon
id|printf
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|arg
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|get_sha1
c_func
(paren
id|arg
comma
id|sha1
)paren
)paren
(brace
r_if
c_cond
(paren
id|no_revs
)paren
r_continue
suffix:semicolon
id|def
op_assign
l_int|NULL
suffix:semicolon
id|printf
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|sha1_to_hex
c_func
(paren
id|sha1
)paren
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_star
id|arg
op_eq
l_char|&squot;^&squot;
op_logical_and
op_logical_neg
id|get_sha1
c_func
(paren
id|arg
op_plus
l_int|1
comma
id|sha1
)paren
)paren
(brace
r_if
c_cond
(paren
id|no_revs
)paren
r_continue
suffix:semicolon
id|def
op_assign
l_int|NULL
suffix:semicolon
id|printf
c_func
(paren
l_string|&quot;^%s&bslash;n&quot;
comma
id|sha1_to_hex
c_func
(paren
id|sha1
)paren
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
id|dotdot
op_assign
id|strstr
c_func
(paren
id|arg
comma
l_string|&quot;..&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dotdot
)paren
(brace
r_int
r_char
id|end
(braket
l_int|20
)braket
suffix:semicolon
r_char
op_star
id|n
op_assign
id|dotdot
op_plus
l_int|2
suffix:semicolon
op_star
id|dotdot
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|get_sha1
c_func
(paren
id|arg
comma
id|sha1
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
op_star
id|n
)paren
id|n
op_assign
l_string|&quot;HEAD&quot;
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|get_sha1
c_func
(paren
id|n
comma
id|end
)paren
)paren
(brace
r_if
c_cond
(paren
id|no_revs
)paren
r_continue
suffix:semicolon
id|def
op_assign
l_int|NULL
suffix:semicolon
id|printf
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|sha1_to_hex
c_func
(paren
id|end
)paren
)paren
suffix:semicolon
id|printf
c_func
(paren
l_string|&quot;^%s&bslash;n&quot;
comma
id|sha1_to_hex
c_func
(paren
id|sha1
)paren
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
)brace
op_star
id|dotdot
op_assign
l_char|&squot;.&squot;
suffix:semicolon
)brace
r_if
c_cond
(paren
id|revs_only
)paren
r_continue
suffix:semicolon
id|def
op_assign
l_int|NULL
suffix:semicolon
id|printf
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|arg
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|def
)paren
id|printf
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|def
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
eof
