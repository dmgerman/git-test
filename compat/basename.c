macro_line|#include &quot;../git-compat-util.h&quot;
multiline_comment|/* Adapted from libiberty&squot;s basename.c.  */
DECL|function|gitbasename
r_char
op_star
id|gitbasename
(paren
r_char
op_star
id|path
)paren
(brace
r_const
r_char
op_star
id|base
suffix:semicolon
multiline_comment|/* Skip over the disk name in MSDOS pathnames. */
r_if
c_cond
(paren
id|has_dos_drive_prefix
c_func
(paren
id|path
)paren
)paren
id|path
op_add_assign
l_int|2
suffix:semicolon
r_for
c_loop
(paren
id|base
op_assign
id|path
suffix:semicolon
op_star
id|path
suffix:semicolon
id|path
op_increment
)paren
(brace
r_if
c_cond
(paren
id|is_dir_sep
c_func
(paren
op_star
id|path
)paren
)paren
id|base
op_assign
id|path
op_plus
l_int|1
suffix:semicolon
)brace
r_return
(paren
r_char
op_star
)paren
id|base
suffix:semicolon
)brace
eof
