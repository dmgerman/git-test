macro_line|#include &quot;../git-compat-util.h&quot;
DECL|macro|write
macro_line|#undef write
multiline_comment|/*&n; * Version of write that will write at most INT_MAX bytes.&n; * Workaround a xnu bug on Mac OS X&n; */
DECL|function|clipped_write
id|ssize_t
id|clipped_write
c_func
(paren
r_int
id|fildes
comma
r_const
r_void
op_star
id|buf
comma
r_int
id|nbyte
)paren
(brace
r_if
c_cond
(paren
id|nbyte
OG
id|INT_MAX
)paren
id|nbyte
op_assign
id|INT_MAX
suffix:semicolon
r_return
id|write
c_func
(paren
id|fildes
comma
id|buf
comma
id|nbyte
)paren
suffix:semicolon
)brace
eof
