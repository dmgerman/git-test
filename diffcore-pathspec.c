multiline_comment|/*&n; * Copyright (C) 2005 Junio C Hamano&n; */
macro_line|#include &quot;cache.h&quot;
macro_line|#include &quot;diff.h&quot;
macro_line|#include &quot;diffcore.h&quot;
macro_line|#include &quot;delta.h&quot;
DECL|struct|path_spec
r_struct
id|path_spec
(brace
DECL|member|spec
r_const
r_char
op_star
id|spec
suffix:semicolon
DECL|member|len
r_int
id|len
suffix:semicolon
)brace
suffix:semicolon
DECL|function|matches_pathspec
r_static
r_int
id|matches_pathspec
c_func
(paren
r_const
r_char
op_star
id|name
comma
r_struct
id|path_spec
op_star
id|s
comma
r_int
id|cnt
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
id|namelen
suffix:semicolon
r_if
c_cond
(paren
id|cnt
op_eq
l_int|0
)paren
r_return
l_int|1
suffix:semicolon
id|namelen
op_assign
id|strlen
c_func
(paren
id|name
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|cnt
suffix:semicolon
id|i
op_increment
)paren
(brace
r_int
id|len
op_assign
id|s
(braket
id|i
)braket
dot
id|len
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strncmp
c_func
(paren
id|s
(braket
id|i
)braket
dot
id|spec
comma
id|name
comma
id|len
)paren
op_logical_and
id|len
op_le
id|namelen
op_logical_and
(paren
id|name
(braket
id|len
)braket
op_eq
l_int|0
op_logical_or
id|name
(braket
id|len
)braket
op_eq
l_char|&squot;/&squot;
)paren
)paren
r_return
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|diffcore_pathspec
r_void
id|diffcore_pathspec
c_func
(paren
r_const
r_char
op_star
op_star
id|pathspec
)paren
(brace
r_struct
id|diff_queue_struct
op_star
id|q
op_assign
op_amp
id|diff_queued_diff
suffix:semicolon
r_int
id|i
comma
id|speccnt
suffix:semicolon
r_struct
id|diff_queue_struct
id|outq
suffix:semicolon
r_struct
id|path_spec
op_star
id|spec
suffix:semicolon
id|outq.queue
op_assign
l_int|NULL
suffix:semicolon
id|outq.nr
op_assign
id|outq.alloc
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|pathspec
(braket
id|i
)braket
suffix:semicolon
id|i
op_increment
)paren
suffix:semicolon
id|speccnt
op_assign
id|i
suffix:semicolon
id|spec
op_assign
id|xmalloc
c_func
(paren
r_sizeof
(paren
op_star
id|spec
)paren
op_star
id|speccnt
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|pathspec
(braket
id|i
)braket
suffix:semicolon
id|i
op_increment
)paren
(brace
id|spec
(braket
id|i
)braket
dot
id|spec
op_assign
id|pathspec
(braket
id|i
)braket
suffix:semicolon
id|spec
(braket
id|i
)braket
dot
id|len
op_assign
id|strlen
c_func
(paren
id|pathspec
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|q-&gt;nr
suffix:semicolon
id|i
op_increment
)paren
(brace
r_struct
id|diff_filepair
op_star
id|p
op_assign
id|q-&gt;queue
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|matches_pathspec
c_func
(paren
id|p-&gt;one-&gt;path
comma
id|spec
comma
id|speccnt
)paren
op_logical_or
id|matches_pathspec
c_func
(paren
id|p-&gt;two-&gt;path
comma
id|spec
comma
id|speccnt
)paren
)paren
id|diff_q
c_func
(paren
op_amp
id|outq
comma
id|p
)paren
suffix:semicolon
r_else
id|free
c_func
(paren
id|p
)paren
suffix:semicolon
)brace
id|free
c_func
(paren
id|q-&gt;queue
)paren
suffix:semicolon
op_star
id|q
op_assign
id|outq
suffix:semicolon
r_return
suffix:semicolon
)brace
eof
