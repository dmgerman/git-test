multiline_comment|/*&n; * test-svn-fe: Code to exercise the svn import lib&n; */
macro_line|#include &quot;git-compat-util.h&quot;
macro_line|#include &quot;vcs-svn/svndump.h&quot;
macro_line|#include &quot;vcs-svn/svndiff.h&quot;
macro_line|#include &quot;vcs-svn/sliding_window.h&quot;
macro_line|#include &quot;vcs-svn/line_buffer.h&quot;
DECL|function|main
r_int
id|main
c_func
(paren
r_int
id|argc
comma
r_char
op_star
id|argv
(braket
)braket
)paren
(brace
r_static
r_const
r_char
id|test_svnfe_usage
(braket
)braket
op_assign
l_string|&quot;test-svn-fe (&lt;dumpfile&gt; | [-d] &lt;preimage&gt; &lt;delta&gt; &lt;len&gt;)&quot;
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_eq
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|svndump_init
c_func
(paren
id|argv
(braket
l_int|1
)braket
)paren
)paren
r_return
l_int|1
suffix:semicolon
id|svndump_read
c_func
(paren
l_int|NULL
)paren
suffix:semicolon
id|svndump_deinit
c_func
(paren
)paren
suffix:semicolon
id|svndump_reset
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|argc
op_eq
l_int|5
op_logical_and
op_logical_neg
id|strcmp
c_func
(paren
id|argv
(braket
l_int|1
)braket
comma
l_string|&quot;-d&quot;
)paren
)paren
(brace
r_struct
id|line_buffer
id|preimage
op_assign
id|LINE_BUFFER_INIT
suffix:semicolon
r_struct
id|line_buffer
id|delta
op_assign
id|LINE_BUFFER_INIT
suffix:semicolon
r_struct
id|sliding_view
id|preimage_view
op_assign
id|SLIDING_VIEW_INIT
c_func
(paren
op_amp
id|preimage
)paren
suffix:semicolon
r_if
c_cond
(paren
id|buffer_init
c_func
(paren
op_amp
id|preimage
comma
id|argv
(braket
l_int|2
)braket
)paren
)paren
id|die_errno
c_func
(paren
l_string|&quot;cannot open preimage&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|buffer_init
c_func
(paren
op_amp
id|delta
comma
id|argv
(braket
l_int|3
)braket
)paren
)paren
id|die_errno
c_func
(paren
l_string|&quot;cannot open delta&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|svndiff0_apply
c_func
(paren
op_amp
id|delta
comma
(paren
id|off_t
)paren
id|strtoull
c_func
(paren
id|argv
(braket
l_int|4
)braket
comma
l_int|NULL
comma
l_int|0
)paren
comma
op_amp
id|preimage_view
comma
id|stdout
)paren
)paren
r_return
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|buffer_deinit
c_func
(paren
op_amp
id|preimage
)paren
)paren
id|die_errno
c_func
(paren
l_string|&quot;cannot close preimage&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|buffer_deinit
c_func
(paren
op_amp
id|delta
)paren
)paren
id|die_errno
c_func
(paren
l_string|&quot;cannot close delta&quot;
)paren
suffix:semicolon
id|buffer_reset
c_func
(paren
op_amp
id|preimage
)paren
suffix:semicolon
id|strbuf_release
c_func
(paren
op_amp
id|preimage_view.buf
)paren
suffix:semicolon
id|buffer_reset
c_func
(paren
op_amp
id|delta
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|usage
c_func
(paren
id|test_svnfe_usage
)paren
suffix:semicolon
)brace
eof
